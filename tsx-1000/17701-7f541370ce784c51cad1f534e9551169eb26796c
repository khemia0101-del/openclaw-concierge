{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});import{jsxLocPlugin}from\"@builder.io/vite-plugin-jsx-loc\";import tailwindcss from\"@tailwindcss/vite\";import react from\"@vitejs/plugin-react\";import fs from\"node:fs\";import path from\"node:path\";import{defineConfig}from\"vite\";import{vitePluginManusRuntime}from\"vite-plugin-manus-runtime\";const PROJECT_ROOT=import.meta.dirname;const LOG_DIR=path.join(PROJECT_ROOT,\".manus-logs\");const MAX_LOG_SIZE_BYTES=1*1024*1024;const TRIM_TARGET_BYTES=Math.floor(MAX_LOG_SIZE_BYTES*.6);function ensureLogDir(){if(!fs.existsSync(LOG_DIR)){fs.mkdirSync(LOG_DIR,{recursive:true})}}__name(ensureLogDir,\"ensureLogDir\");function trimLogFile(logPath,maxSize){try{if(!fs.existsSync(logPath)||fs.statSync(logPath).size<=maxSize){return}const lines=fs.readFileSync(logPath,\"utf-8\").split(\"\\n\");const keptLines=[];let keptBytes=0;const targetSize=TRIM_TARGET_BYTES;for(let i=lines.length-1;i>=0;i--){const lineBytes=Buffer.byteLength(`${lines[i]}\n`,\"utf-8\");if(keptBytes+lineBytes>targetSize)break;keptLines.unshift(lines[i]);keptBytes+=lineBytes}fs.writeFileSync(logPath,keptLines.join(\"\\n\"),\"utf-8\")}catch{}}__name(trimLogFile,\"trimLogFile\");function writeToLogFile(source,entries){if(entries.length===0)return;ensureLogDir();const logPath=path.join(LOG_DIR,`${source}.log`);const lines=entries.map(entry=>{const ts=new Date().toISOString();return`[${ts}] ${JSON.stringify(entry)}`});fs.appendFileSync(logPath,`${lines.join(\"\\n\")}\n`,\"utf-8\");trimLogFile(logPath,MAX_LOG_SIZE_BYTES)}__name(writeToLogFile,\"writeToLogFile\");function vitePluginManusDebugCollector(){return{name:\"manus-debug-collector\",transformIndexHtml(html){if(process.env.NODE_ENV===\"production\"){return html}return{html,tags:[{tag:\"script\",attrs:{src:\"/__manus__/debug-collector.js\",defer:true},injectTo:\"head\"}]}},configureServer(server){server.middlewares.use(\"/__manus__/logs\",(req,res,next)=>{if(req.method!==\"POST\"){return next()}const handlePayload=__name(payload=>{if(payload.consoleLogs?.length>0){writeToLogFile(\"browserConsole\",payload.consoleLogs)}if(payload.networkRequests?.length>0){writeToLogFile(\"networkRequests\",payload.networkRequests)}if(payload.sessionEvents?.length>0){writeToLogFile(\"sessionReplay\",payload.sessionEvents)}res.writeHead(200,{\"Content-Type\":\"application/json\"});res.end(JSON.stringify({success:true}))},\"handlePayload\");const reqBody=req.body;if(reqBody&&typeof reqBody===\"object\"){try{handlePayload(reqBody)}catch(e){res.writeHead(400,{\"Content-Type\":\"application/json\"});res.end(JSON.stringify({success:false,error:String(e)}))}return}let body=\"\";req.on(\"data\",chunk=>{body+=chunk.toString()});req.on(\"end\",()=>{try{const payload=JSON.parse(body);handlePayload(payload)}catch(e){res.writeHead(400,{\"Content-Type\":\"application/json\"});res.end(JSON.stringify({success:false,error:String(e)}))}})})}}}__name(vitePluginManusDebugCollector,\"vitePluginManusDebugCollector\");const plugins=[react(),tailwindcss(),jsxLocPlugin(),vitePluginManusRuntime(),vitePluginManusDebugCollector()];var vite_config_default=defineConfig({plugins,resolve:{alias:{\"@\":path.resolve(import.meta.dirname,\"client\",\"src\"),\"@shared\":path.resolve(import.meta.dirname,\"shared\"),\"@assets\":path.resolve(import.meta.dirname,\"attached_assets\")}},envDir:path.resolve(import.meta.dirname),root:path.resolve(import.meta.dirname,\"client\"),publicDir:path.resolve(import.meta.dirname,\"client\",\"public\"),build:{outDir:path.resolve(import.meta.dirname,\"dist/public\"),emptyOutDir:true},server:{host:true,allowedHosts:[\".manuspre.computer\",\".manus.computer\",\".manus-asia.computer\",\".manuscomputer.ai\",\".manusvm.computer\",\"localhost\",\"127.0.0.1\"],fs:{strict:true,deny:[\"**/.*\"]}}});export{vite_config_default as default};\n","warnings":[],"map":{"version":3,"mappings":"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","names":[],"ignoreList":[],"sources":["/home/ubuntu/openclaw-concierge/vite.config.ts"],"sourcesContent":[null]}}
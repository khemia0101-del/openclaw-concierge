{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});import Stripe from\"stripe\";const stripe=new Stripe(process.env.STRIPE_SECRET_KEY||\"\",{apiVersion:\"2024-12-18.acacia\"});const PRICING={starter:{setupFee:5e4,monthlyPrice:9900},pro:{setupFee:75e3,monthlyPrice:19900},business:{setupFee:1e5,monthlyPrice:29900}};async function createCheckoutSession(params){const{customerEmail,tier,userId,successUrl,cancelUrl}=params;const pricing=PRICING[tier];const session=await stripe.checkout.sessions.create({mode:\"payment\",customer_email:customerEmail,client_reference_id:userId.toString(),success_url:successUrl,cancel_url:cancelUrl,allow_promotion_codes:true,metadata:{userId:userId.toString(),tier,customerEmail},line_items:[{price_data:{currency:\"usd\",product_data:{name:`${tier.charAt(0).toUpperCase()+tier.slice(1)} Plan - Setup Fee`,description:\"One-time setup and configuration fee\"},unit_amount:pricing.setupFee},quantity:1},{price_data:{currency:\"usd\",product_data:{name:`${tier.charAt(0).toUpperCase()+tier.slice(1)} Plan - First Month`,description:\"Monthly subscription fee\"},unit_amount:pricing.monthlyPrice},quantity:1}]});return session}__name(createCheckoutSession,\"createCheckoutSession\");async function getCheckoutSession(sessionId){return await stripe.checkout.sessions.retrieve(sessionId)}__name(getCheckoutSession,\"getCheckoutSession\");async function createCustomer(email,name){return await stripe.customers.create({email,name})}__name(createCustomer,\"createCustomer\");function constructWebhookEvent(payload,signature,secret){return stripe.webhooks.constructEvent(payload,signature,secret)}__name(constructWebhookEvent,\"constructWebhookEvent\");export{PRICING,constructWebhookEvent,createCheckoutSession,createCustomer,getCheckoutSession,stripe};\n","warnings":[],"map":{"version":3,"mappings":"kHAAA,OAAO,WAAY,SAEnB,MAAM,OAAS,IAAI,OAAO,QAAQ,IAAI,mBAAqB,GAAI,CAC7D,WAAY,mBACd,CAAC,EAWM,MAAM,QAAU,CACrB,QAAS,CACP,SAAU,IACV,aAAc,IAChB,EACA,IAAK,CACH,SAAU,KACV,aAAc,KAChB,EACA,SAAU,CACR,SAAU,IACV,aAAc,KAChB,CACF,EAKA,eAAsB,sBACpB,OACkC,CAClC,KAAM,CAAE,cAAe,KAAM,OAAQ,WAAY,SAAU,EAAI,OAC/D,MAAM,QAAU,QAAQ,IAAI,EAE5B,MAAM,QAAU,MAAM,OAAO,SAAS,SAAS,OAAO,CACpD,KAAM,UACN,eAAgB,cAChB,oBAAqB,OAAO,SAAS,EACrC,YAAa,WACb,WAAY,UACZ,sBAAuB,KACvB,SAAU,CACR,OAAQ,OAAO,SAAS,EACxB,KACA,aACF,EACA,WAAY,CACV,CACE,WAAY,CACV,SAAU,MACV,aAAc,CACZ,KAAM,GAAG,KAAK,OAAO,CAAC,EAAE,YAAY,EAAI,KAAK,MAAM,CAAC,CAAC,oBACrD,YAAa,sCACf,EACA,YAAa,QAAQ,QACvB,EACA,SAAU,CACZ,EACA,CACE,WAAY,CACV,SAAU,MACV,aAAc,CACZ,KAAM,GAAG,KAAK,OAAO,CAAC,EAAE,YAAY,EAAI,KAAK,MAAM,CAAC,CAAC,sBACrD,YAAa,0BACf,EACA,YAAa,QAAQ,YACvB,EACA,SAAU,CACZ,CACF,CACF,CAAC,EAED,OAAO,OACT,CA7CsB,sDAkDtB,eAAsB,mBAAmB,UAAqD,CAC5F,OAAO,MAAM,OAAO,SAAS,SAAS,SAAS,SAAS,CAC1D,CAFsB,gDAOtB,eAAsB,eAAe,MAAe,KAAyC,CAC3F,OAAO,MAAM,OAAO,UAAU,OAAO,CACnC,MACA,IACF,CAAC,CACH,CALsB,wCAUf,SAAS,sBACd,QACA,UACA,OACc,CACd,OAAO,OAAO,SAAS,eAAe,QAAS,UAAW,MAAM,CAClE,CANgB","names":[],"ignoreList":[],"sources":["/home/ubuntu/openclaw-concierge/server/services/stripe.ts"],"sourcesContent":[null]}}